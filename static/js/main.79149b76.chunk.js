(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),s=n.n(c),i=n(29),u=n(92),o=n(61),l=n(147),j=n(146),d=n(20),b="SET_AUTH",O="SET_ERROR",h="SET_USER",m="SET_IS_LOADING",v={isAuth:!1,error:"",isLoading:!1,user:{}};var f="SET_GUESTS",p="SET_EVENTS",x={guests:[],events:[]};var g={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(d.a)(Object(d.a)({},e),{},{isAuth:t.payload,isLoading:!1});case O:return Object(d.a)(Object(d.a)({},e),{},{error:t.payload,isLoading:!1});case h:return Object(d.a)(Object(d.a)({},e),{},{user:t.payload});case m:return Object(d.a)(Object(d.a)({},e),{},{isLoading:t.payload});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(d.a)(Object(d.a)({},e),{},{guests:t.payload});case p:return Object(d.a)(Object(d.a)({},e),{},{events:t.payload});default:return e}}},y=Object(o.combineReducers)(g),E=Object(o.createStore)(y,Object(j.composeWithDevTools)(Object(o.applyMiddleware)(l.a))),N=n(272),S=n(26),_=n(78),I=n(273),w=n(67),U=n.n(w),A=n(119),C=n(148),k=n(149),T=[{username:"user",password:"123",name:"User"},{username:"admin",password:"admin777",name:"Admin"},{username:"voverg",password:"cat2dog",name:"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u041f\u0435\u0442\u0440\u043e\u0432"},{username:"tancha",password:"novchik",name:"\u0422\u0430\u0442\u044c\u044f\u043d\u0430 \u041f\u0435\u0442\u0440\u043e\u0432\u0430"},{username:"andr",password:"fat37",name:"\u0410\u043d\u0434\u0440\u0435\u0439 \u0410\u043a\u0441\u0451\u043d\u043e\u0432"},{username:"bender",password:"futurama",name:"\u0420\u043e\u0431\u043e\u0442 \u0411\u0435\u043d\u0434\u0435\u0440"}],L=function(){function e(){Object(C.a)(this,e)}return Object(k.a)(e,null,[{key:"getUsers",value:function(e){return T}},{key:"getUser",value:function(e){return T.find((function(t){return t.username===e}))}}]),e}(),D={setUser:function(e){return{type:h,payload:e}},setIsAuth:function(e){return{type:b,payload:e}},setError:function(e){return{type:O,payload:e}},setIsLoading:function(e){return{type:m,payload:e}},login:function(e,t){return function(){var n=Object(A.a)(U.a.mark((function n(a){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{a(D.setIsLoading(!0)),setTimeout(Object(A.a)(U.a.mark((function n(){var r,c;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=L.getUsers(),(c=r.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("calendarAuth","true"),localStorage.setItem("calendarUsername",c.username),a(D.setUser(c)),a(D.setIsAuth(!0))):a(D.setError("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"));case 3:case"end":return n.stop()}}),n)}))),500)}catch(r){a(D.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043b\u043e\u0433\u0438\u043d\u0435: ",r))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(A.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("calendarAuth"),localStorage.removeItem("calendarUsername"),t(D.setUser({})),t(D.setIsAuth(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},J={setGuests:function(e){return{type:f,payload:e}},setEvents:function(e){return{type:p,payload:e}},fetchGuests:function(){return function(e){try{var t=L.getUsers();e(J.setGuests(t))}catch(n){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: ",n)}}},createEvent:function(e){return function(t){try{var n=localStorage.getItem("calendarEvents")||"[]",a=JSON.parse(n);a.push(e),t(J.setEvents(a)),localStorage.setItem("calendarEvents",JSON.stringify(a))}catch(r){console.log(r)}}},removeEvent:function(e){return function(t){try{var n=localStorage.getItem("calendarEvents")||"[]",a=JSON.parse(n).filter((function(t){return t.id!==e}));t(J.setEvents(a)),localStorage.setItem("calendarEvents",JSON.stringify(a))}catch(r){console.log(r)}}},fetchEvents:function(e){return function(t){try{var n=localStorage.getItem("calendarEvents")||"[]",a=JSON.parse(n).filter((function(t){return t.guest===e||t.author===e}));t(J.setEvents(a))}catch(r){console.log(r)}}}},G=Object(d.a)(Object(d.a)({},D),J),M=function(){var e=Object(i.b)();return Object(o.bindActionCreators)(G,e)},R=function(e){var t=e.getFullYear(),n=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,".").concat(n,".").concat(a)},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435";return{required:!0,message:e}},V=n(7),H=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),u=Object(_.a)(s,2),o=u[0],l=u[1],j=Object(a.useState)([]),d=Object(_.a)(j,2),b=d[0],O=d[1],h=Object(i.c)((function(e){return e.event})),m=h.guests,v=h.events,f=M(),p=f.fetchGuests,x=f.fetchEvents,g=f.createEvent,y=f.removeEvent,E=Object(i.c)((function(e){return e.auth})).user;Object(a.useEffect)((function(){p(),x(E.username)}),[]);return Object(V.jsxs)(N.a,{children:[Object(V.jsx)(Z,{setModalVisible:c}),Object(V.jsx)("div",{className:"calendar-wrap",onClick:function(e){var t=e.target;t.closest(".events")&&(t=t.closest(".events")),"events"===t.className&&(O(function(e,t){return Array.from(e.children).map((function(e){return e.id})).map((function(e){return t.find((function(t){return t.id===e}))}))}(t,v)),l(!0))},children:Object(V.jsx)(ue,{events:v})}),Object(V.jsx)(I.a,{title:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435",visible:r,onCancel:function(){return c(!1)},footer:null,children:Object(V.jsx)(ce,{addEvent:function(e){c(!1),g(e),x(E.username)},guests:m})}),Object(V.jsx)(I.a,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439",visible:o,onCancel:function(){return l(!1)},footer:null,children:Object(V.jsx)(oe,{currentEvents:b,deleteEvent:function(e){y(e),O(b.filter((function(t){return t.id!==e})))}})})]})},q=n(79),B=n(268),W="/react-calendar/login",Y="/react-calendar",z=[{path:W,component:function(e){return Object(V.jsxs)("div",{className:"login",children:[Object(V.jsx)(Z,{}),Object(V.jsx)(q.a,{justify:"center",align:"middle",className:"h100",children:Object(V.jsxs)(B.a,{children:[Object(V.jsx)("div",{className:"card__header",children:Object(V.jsxs)("p",{children:["\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0432\u043e\u0439\u0442\u0438.",Object(V.jsx)("br",{}),"\u0414\u0435\u043c\u043e-\u0432\u0445\u043e\u0434: \u043b\u043e\u0433\u0438\u043d - ",Object(V.jsx)("b",{children:"user"}),", \u043f\u0430\u0440\u043e\u043b\u044c - ",Object(V.jsx)("b",{children:"123"})]})}),Object(V.jsx)(ne,{})]})})]})},exact:!0}],K=[{path:Y,component:H,exact:!0}],P=function(e){return Object(i.c)((function(e){return e.auth})).isAuth?Object(V.jsxs)(S.d,{children:[K.map((function(e){return Object(V.jsx)(S.b,{path:e.path,component:e.component,exact:e.exact},e.path)})),Object(V.jsx)(S.a,{to:Y})]}):Object(V.jsxs)(S.d,{children:[z.map((function(e){return Object(V.jsx)(S.b,{path:e.path,component:e.component,exact:e.exact},e.path)})),Object(V.jsx)(S.a,{to:W})]})},Q=n(118),X=(n(244),function(e){var t=e.children,n=Object(Q.a)(e,["children"]),a=n.className?n.className:"";return Object(V.jsx)("button",Object(d.a)(Object(d.a)({},n),{},{className:"base-button ".concat(a),children:t}))}),Z=(n(245),n(246),function(e){N.a.Header;var t=Object(S.g)(),n=Object(i.c)((function(e){return e.auth})),a=n.isAuth,c=n.user,s=M().logout;return Object(V.jsx)("header",{className:"navbar",children:a?Object(V.jsxs)(r.a.Fragment,{children:[Object(V.jsx)(X,{className:"navbar__add-btn",onClick:function(){return e.setModalVisible(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(V.jsx)("div",{className:"navbar__user-name",children:c.name}),Object(V.jsx)("nav",{className:"havbar__nav",children:Object(V.jsx)("div",{className:"navbar__item",onClick:s,children:"\u0412\u044b\u0439\u0442\u0438"},1)})]}):Object(V.jsxs)(r.a.Fragment,{children:[Object(V.jsx)("div",{className:"logo"}),Object(V.jsx)("nav",{className:"havbar__nav",children:Object(V.jsx)("div",{className:"navbar__item",onClick:function(){return t.push(W)},children:"Login"},1)})]})})}),$=n(269),ee=n(271),te=n(51),ne=function(e){var t=Object(i.c)((function(e){return e.auth})),n=t.error,a=t.isLoading,r=M().login;return Object(V.jsxs)($.a,{onFinish:function(e){r(e.username,e.password)},autoComplete:"off",children:[n&&Object(V.jsx)("div",{className:"error-text",children:n}),Object(V.jsx)($.a.Item,{label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"username",rules:[F("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f!")],children:Object(V.jsx)(ee.a,{})}),Object(V.jsx)($.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[F("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!")],children:Object(V.jsx)(ee.a,{})}),Object(V.jsx)($.a.Item,{children:Object(V.jsx)(te.a,{type:"primary",htmlType:"submit",loading:a,children:"\u0412\u043e\u0439\u0442\u0438"})})]})},ae=n(130),re=n(270),ce=function(e){var t=e.addEvent,n=e.guests,r=Object(a.useState)({author:"",date:"",description:"",guest:"",id:""}),c=Object(_.a)(r,2),s=c[0],u=c[1],o=ae.a.Option,l=Object(i.c)((function(e){return e.auth})).user;return Object(V.jsxs)($.a,{onFinish:function(){var e=Date.now().toString();t(Object(d.a)(Object(d.a)({},s),{},{author:l.username,id:e}))},autoComplete:"off",children:[Object(V.jsx)($.a.Item,{label:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435",name:"description",rules:[F()],children:Object(V.jsx)(ee.a,{onChange:function(e){var t=e.target.value;u(Object(d.a)(Object(d.a)({},s),{},{description:t}))}})}),Object(V.jsx)($.a.Item,{label:"\u0414\u0430\u0442\u0430",name:"date",rules:[F()],children:Object(V.jsx)(re.a,{onChange:function(e){if(e){var t=R(e.toDate());u(Object(d.a)(Object(d.a)({},s),{},{date:t}))}}})}),Object(V.jsx)($.a.Item,{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a",name:"guest",rules:[F()],children:Object(V.jsx)(ae.a,{style:{width:220},onChange:function(e){u(Object(d.a)(Object(d.a)({},s),{},{guest:e}))},children:n.map((function(e){return Object(V.jsx)(o,{value:e.username,children:e.name},e.username)}))})}),Object(V.jsx)($.a.Item,{children:Object(V.jsx)(te.a,{type:"primary",htmlType:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"})})]})},se=n(275),ie=n(274),ue=function(e){var t=e.events;return Object(V.jsx)(ie.a,{dateCellRender:function(e){var n=R(e.toDate()),a=t.filter((function(e){return e.date===n}));return Object(V.jsx)("div",{className:"events",children:a.map((function(e){return Object(V.jsx)("div",{id:e.id,className:"events-item",children:Object(V.jsx)(se.a,{status:"success",text:e.description})},e.id)}))})}})},oe=function(e){var t=e.currentEvents,n=e.deleteEvent,a=function(e){var t=e.target.closest(".current-event").id;n(t)};return Object(V.jsx)("div",{className:"event-details",children:t.map((function(e){return Object(V.jsxs)("div",{id:e.id,className:"current-event",children:[Object(V.jsx)("div",{className:"current-event__header",children:e.description}),Object(V.jsxs)("div",{className:"current-event__body",children:[Object(V.jsxs)("div",{className:"current-event__author",children:["\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043b: ",Object(V.jsx)("b",{children:L.getUser(e.author).name})]}),Object(V.jsxs)("div",{className:"current-event__date",children:["\u0414\u0430\u0442\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f: ",Object(V.jsx)("b",{children:e.date})]}),Object(V.jsxs)("div",{className:"current-event__guest",children:["\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043e: ",Object(V.jsx)("b",{children:L.getUser(e.guest).name})]}),Object(V.jsx)(X,{className:"current-event__delete",onClick:a,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"})]})]},e.id)}))})};n(264);var le=function(){var e=M(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){if(localStorage.getItem("calendarAuth")){var e=L.getUser(localStorage.getItem("calendarUsername"));t(Object(d.a)({},e)),n(!0)}}),[]),Object(V.jsx)(N.a,{children:Object(V.jsx)(N.a.Content,{children:Object(V.jsx)(P,{})})})};s.a.render(Object(V.jsx)(i.a,{store:E,children:Object(V.jsx)(u.a,{children:Object(V.jsx)(le,{})})}),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.79149b76.chunk.js.map